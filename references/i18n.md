## Angular 21 i18n Setup Guide (English + Spanish)

This guide explains how to configure Angular 21 built-in i18n using:

- **English** (default)

- **Spanish** (`es`)

This uses Angular’s compile-time localization.

---

## 1. Install Angular Localize

```sh
ng add @angular/localize
```

This adds:

```ts
/// <reference types="@angular/localize" />
```

and enables i18n support.

---

## 2. Mark Text for Translation

In your component template:

```html
<h1 i18n>Welcome to our app</h1>
<p i18n>Some description here</p>
<button i18n>Click me</button>
```

You can also add metadata:

```html
<h1 i18n="site header|Main welcome message@@homeHeader">Welcome to our app</h1>
```

**Format:**

```
i18n="meaning|description@@customId"
```

---

## 3. Extract Translation File

Run:

```sh
ng extract-i18n
```

This generates:

- `src/messages.xlf` (base English file)

---

## 4. Create Spanish Translation File

1. Create folder:
   - `src/locale/`
2. Copy:
   - `src/messages.xlf`
3. Rename to:
   - `src/locale/messages.es.xlf`

---

## 5. Add Spanish Translations

Inside `messages.es.xlf`:

- Add `target-language="es"` to `<file>` tag.

**Example:**

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
  <file source-language="en-US" target-language="es" datatype="plaintext" original="ng2.template">
    <body>
      <trans-unit id="4377217053453097189" datatype="html">
        <source>Welcome to our app</source>
        <target state="translated">Bienvenido a nuestra aplicación</target>
      </trans-unit>
      <trans-unit id="4734515456690809649" datatype="html">
        <source>Some description here</source>
        <target state="translated">Alguna descripción aquí</target>
      </trans-unit>
      <trans-unit id="6190724818182033023" datatype="html">
        <source>Click me</source>
        <target state="translated">Haz clic aquí</target>
      </trans-unit>
    </body>
  </file>
</xliff>
```

**Important:**

- Add `<target>`
- Set `state="translated"`
- Add `target-language="es"`

---

## 6. Update `angular.json`

### Add i18n section inside your project:

```json
"i18n": {
  "sourceLocale": "en-US",
  "locales": {
    "es": "src/locale/messages.es.xlf"
  }
}
```

### Update Build Configuration

Inside `architect.build.options`, add:

```json
"localize": true
```

Add Spanish configuration:

```json
"configurations": {
  "production": {},
  "development": {},
  "es": {
    "localize": ["es"]
  }
}
```

### Update Serve Configuration

Inside `architect.serve.configurations`, add:

```json
"es": {
  "buildTarget": "contact-manager-ng21-app:build:es"
}
```

---

## 7. Run Application

**English (default):**

```sh
ng serve
```

**Spanish:**

```sh
ng serve --configuration=es
```

---

## 8. Production Build

Build all locales:

```sh
ng build --localize
```

Output:

```
dist/contact-manager-ng21-app/
  en-US/
  es/
```

Each folder contains a fully compiled localized version.

---

## Important Notes

- Angular built-in i18n is **compile-time only**.
- You **cannot switch language at runtime** without rebuilding.
- Each locale produces a separate compiled app.
- If runtime switching is required, use [ngx-translate](https://github.com/ngx-translate/core) instead.

---

## Final Folder Structure

```
src/
  messages.xlf
  locale/
    messages.es.xlf
```

---

Your Angular 21 i18n setup is now complete for English and Spanish.
